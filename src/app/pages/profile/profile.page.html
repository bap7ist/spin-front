<ion-content>
  <!-- Background gradient -->
  <div
    class="profile-background"
    [style.background]="gradient$ | async"
  ></div>

  <!-- Main content -->
  <div class="profile-content">
    <!-- Zone cliquable pour le gradient -->
    <div class="gradient-click-zone" (click)="onChangeGradient()"></div>

    <!-- Profile card -->
    <div class="profile-card">
      <!-- Avatar section -->
      <div class="avatar-container">
        <ion-avatar (click)="onChangeAvatar()">
          @if (isLoading) {
          <div class="avatar-loader">
            <ion-spinner name="crescent"></ion-spinner>
          </div>
          } @else {
          <img
            [src]="(user$ | async)?.avatar || 'https://ionicframework.com/docs/img/demos/avatar.svg'"
            alt="Profile"
          />
          <div class="avatar-overlay">
            <ion-icon name="camera"></ion-icon>
          </div>
          }
        </ion-avatar>
        <h2>
          {{ (user$ | async)?.firstName }} {{ (user$ | async)?.lastName }}
        </h2>
        <p>{{ (user$ | async)?.email }}</p>
      </div>

      <!-- Menu sections -->
      <div class="menu-sections">
        <ion-item detail="true" [routerLink]="['personal-info']" lines="none">
          <ion-icon slot="start" name="person-outline"></ion-icon>
          <ion-label>Informations personnelles</ion-label>
        </ion-item>

        <ion-item detail="true" [routerLink]="['interests']" lines="none">
          <ion-icon slot="start" name="heart-outline"></ion-icon>
          <ion-label>Centres d'intérêt</ion-label>
        </ion-item>

        <ion-item detail="true" [routerLink]="['/settings']" lines="none">
          <ion-icon slot="start" name="settings-outline"></ion-icon>
          <ion-label>Paramètres</ion-label>
        </ion-item>

        <ion-item detail="true" [routerLink]="['/security']" lines="none">
          <ion-icon slot="start" name="shield-outline"></ion-icon>
          <ion-label>Sécurité</ion-label>
        </ion-item>
      </div>

      <!-- Logout button -->
      <div class="logout-section">
        <ion-button
          expand="block"
          fill="clear"
          color="danger"
          (click)="onLogout()"
        >
          <ion-icon slot="start" name="log-out-outline"></ion-icon>
          Se déconnecter
        </ion-button>
      </div>
    </div>
  </div>
</ion-content>
